@model Portfolio_Management.Models.StaffDashboardViewModel

@{
    ViewBag.Title = "Staff";
    Layout = "~/Views/Shared/_StaffLayout.cshtml";
}

<div class="right_col" role="main">
    <div class="">

        <div class="row">
            <div class="animated flipInY col-lg-3 col-md-3 col-sm-6 col-xs-12">
                <div class="tile-stats">
                    <div class="icon">
                        <i class="fa fa-caret-square-o-right"></i>
                    </div>
                    <div class="count">347</div>

                    <h3>Staff Members</h3>
                    <p>Lorem ipsum psdea itgum rixt.</p>
                </div>
            </div>
            <div class="animated flipInY col-lg-3 col-md-3 col-sm-6 col-xs-12">
                <div class="tile-stats">
                    <div class="icon">
                        <i class="fa fa-comments-o"></i>
                    </div>
                    <div class="count">151</div>

                    <h3>Contracts</h3>
                    <p>Lorem ipsum psdea itgum rixt.</p>
                </div>
            </div>
            <div class="animated flipInY col-lg-3 col-md-3 col-sm-6 col-xs-12">
                <div class="tile-stats">
                    <div class="icon">
                        <i class="fa fa-sort-amount-desc"></i>
                    </div>
                    <div class="count">59</div>

                    <h3>Open Recs</h3>
                    <p>Lorem ipsum psdea itgum rixt.</p>
                </div>
            </div>
            <div class="animated flipInY col-lg-3 col-md-3 col-sm-6 col-xs-12">
                <div class="tile-stats">
                    <div class="icon">
                        <i class="fa fa-check-square-o"></i>
                    </div>
                    <div class="count">219</div>

                    <h3>Security Clearances</h3>
                    <p>Lorem ipsum psdea itgum rixt.</p>
                </div>
            </div>
        </div>


        <div id="instructions" style="text-align:center;">
            Select a staff member.
        </div>

            <div class="col-md-12 col-sm-12 col-xs-12">
                <div class="x_panel">
                    <div class="x_title">
                        <h2><i class="fa fa-bars"></i> Tabs </h2>
                        <ul class="nav navbar-right panel_toolbox">
                            <li>
                                <a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-wrench"></i></a>
                                <ul class="dropdown-menu" role="menu">
                                    <li>
                                        <a href="#">Settings 1</a>
                                    </li>
                                    <li>
                                        <a href="#">Settings 2</a>
                                    </li>
                                </ul>
                            </li>
                            <li>
                                <a class="close-link"><i class="fa fa-close"></i></a>
                            </li>
                        </ul>
                        <div class="clearfix"></div>
                    </div>
                    <div class="x_content">

                        <div class="" role="tabpanel" data-example-id="togglable-tabs">
                            <ul id="myTab" class="nav nav-tabs bar_tabs" role="tablist">
                                <li role="presentation" class="active">
                                    <a href="#tab_content1" id="tab1" role="tab" data-toggle="tab" aria-expanded="true">Staff Details</a>
                                </li>
                                <li role="presentation" class="">
                                    <a href="#tab_content2" role="tab" id="tab2" data-toggle="tab" aria-expanded="false">Education</a>
                                </li>
                                <li role="presentation" class="">
                                    <a href="#tab_content3" role="tab" id="tab3" data-toggle="tab" aria-expanded="false">Certifications</a>
                                </li>
                                <li role="presentation" class="">
                                    <a href="#tab_content4" role="tab" id="tab4" data-toggle="tab" aria-expanded="false">Skills</a>
                                </li>
                                <li role="presentation" class="">
                                    <a href="#tab_content5" role="tab" id="tab5" data-toggle="tab" aria-expanded="false">Positions</a>
                                </li>
                                <li role="presentation" class="">
                                    <a href="#tab_content6" role="tab" id="tab6" data-toggle="tab" aria-expanded="false">Training</a>
                                </li>
                                <li role="presentation" class="">
                                    <a href="#tab_content7" role="tab" id="tab7" data-toggle="tab" aria-expanded="false">Assets</a>
                                </li>
                                <li role="presentation" class="">
                                    <a href="#tab_content8" role="tab" id="tab8" data-toggle="tab" aria-expanded="false">Clearance</a>
                                </li>
                                <li role="presentation" class="">
                                    <a href="#tab_content9" role="tab" id="tab9" data-toggle="tab" aria-expanded="false">Contracts</a>
                                </li>
                            </ul>
                            <div id="myTabContent" class="tab-content">
                                <div role="tabpanel" class="tab-pane fade active in" id="tab_content1" aria-labelledby="home-tab">
                                    <!-- Staff member view -->
                                    <div id="staffView">
                                    </div>
                                </div>
                                <div role="tabpanel" class="tab-pane fade" id="tab_content2" aria-labelledby="profile-tab">
                                    <div id="staffEducation">
                                        @Html.Partial("_StaffEducationAction")
                                    </div>
                                </div>
                                <div role="tabpanel" class="tab-pane fade" id="tab_content3" aria-labelledby="profile-tab">
                                    <div id="staffCertification">
                                        @Html.Partial("_StaffCertificationAction")
                                    </div>
                                </div>
                                <div role="tabpanel" class="tab-pane fade" id="tab_content4" aria-labelledby="profile-tab">
                                    <div id="staffSkill">
                                        @Html.Partial("_StaffSkillAction")
                                    </div>
                                </div>
                                <div role="tabpanel" class="tab-pane fade" id="tab_content5" aria-labelledby="profile-tab">
                                    <div id="staffPosition">
                                        @Html.Partial("_StaffPositionAction")
                                    </div>
                                </div>
                                <div role="tabpanel" class="tab-pane fade" id="tab_content6" aria-labelledby="profile-tab">
                                    <div id="staffTraining">
                                        @Html.Partial("_StaffTrainingAction")
                                    </div>
                                </div>
                                <div role="tabpanel" class="tab-pane fade" id="tab_content7" aria-labelledby="profile-tab">
                                    <div id="staffAsset">
                                        @Html.Partial("_StaffAssetAction")
                                    </div>
                                </div>
                                <div role="tabpanel" class="tab-pane fade" id="tab_content8" aria-labelledby="profile-tab">
                                    <div id="staffClearance">
                                        @Html.Partial("_StaffClearanceAction")
                                    </div>
                                </div>
                                <div role="tabpanel" class="tab-pane fade" id="tab_content9" aria-labelledby="profile-tab">
                                    <div id="staffContract">
                                        @Html.Partial("_StaffContractAction")
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>

        </div>
    <script>
        $(document).ready(function () {
            var users = $('#datatable-responsive').DataTable({
                "dom": "t",
                stateSave: true,
                colReorder: true,
                responsive: {
                    details: {
                        display: $.fn.dataTable.Responsive.display.modal({
                            header: function (row) {
                                var data = row.data();
                                return 'Details for ' + data[0];
                            }
                        }),
                        renderer: $.fn.dataTable.Responsive.renderer.tableAll({
                            tableClass: 'table'
                        })
                    }
                }
            });

            $('#searchStaff').keyup(function () {
                users.search($(this).val()).draw();
            })
        });
    </script>

    <script>
        function clearInstructions() {
            $("#instructions").html("&nbsp;");
        }

        $('.clickableRow').click(function () {
            var targetRow = $(this).data('id');
            clearInstructions();

            $.ajax({
                url: '@Url.Action("StaffEducationAction","Staff")',
                data: { id: targetRow },
                method: "GET",
                success: function (data) {
                    $("#staffEducation").empty();
                    $("#staffEducation").html(data);
                },
                error: function (xhr, status, error) {
                    alert(xhr.responseText);
                }
            });
            $.ajax({
                url: '@Url.Action("StaffCertificationAction","Staff")',
                data: { id: targetRow },
                method: "GET",
                success: function (data) {
                    $("#staffCertification").empty();
                    $("#staffCertification").html(data);
                },
                error: function (xhr, status, error) {
                    alert(xhr.responseText);
                }
            });
            $.ajax({
                url: '@Url.Action("StaffSkillAction","Staff")',
                data: { id: targetRow },
                method: "GET",
                success: function (data) {
                    $("#staffSkill").empty();
                    $("#staffSkill").html(data);
                },
                error: function (xhr, status, error) {
                    alert(xhr.responseText);
                }
            });
            $.ajax({
                url: '@Url.Action("StaffPositionAction","Staff")',
                data: { id: targetRow },
                method: "GET",
                success: function (data) {
                    $("#staffPosition").empty();
                    $("#staffPosition").html(data);
                },
                error: function (xhr, status, error) {
                    alert(xhr.responseText);
                }
            });
            $.ajax({
                url: '@Url.Action("StaffAssetAction","Staff")',
                data: { id: targetRow },
                method: "GET",
                success: function (data) {
                    $("#staffAsset").empty();
                    $("#staffAsset").html(data);
                },
                error: function (xhr, status, error) {
                    alert(xhr.responseText);
                }
            });
            $.ajax({
                url: '@Url.Action("StaffTrainingAction","Staff")',
                data: { id: targetRow },
                method: "GET",
                success: function (data) {
                    $("#staffTraining").empty();
                    $("#staffTraining").html(data);
                },
                error: function (xhr, status, error) {
                    alert(xhr.responseText);
                }
            });
            $.ajax({
                url: '@Url.Action("StaffClearanceAction","Staff")',
                data: { id: targetRow },
                method: "GET",
                success: function (data) {
                    $("#staffClearance").empty();
                    $("#staffClearance").html(data);
                },
                error: function (xhr, status, error) {
                    alert(xhr.responseText);
                }
            });
            $.ajax({
                url: '@Url.Action("StaffContractAction","Staff")',
                data: { id: targetRow },
                method: "GET",
                success: function (data) {
                    $("#staffContract").empty();
                    $("#staffContract").html(data);
                },
                error: function (xhr, status, error) {
                    alert(xhr.responseText);
                }
            });
            $.ajax({
                url: '@Url.Action("StaffViewAction","Staff")',
                data: { id: targetRow },
                method: "GET",
                success: function (data) {
                    $("#staffView").empty();
                    $("#staffView").html(data);
                },
                error: function (xhr, status, error) {
                    alert(xhr.responseText);
                }
            });
        })

    </script>

</div>


@*<script>
        $(document).ready(function() {
            $('#datatable-responsive').DataTable( {
                stateSave: true,
                colReorder: true,
                responsive: {
                    details: {
                        display: $.fn.dataTable.Responsive.display.modal({
                            header: function (row) {
                                var data = row.data();
                                return 'Details for ' + data[0];
                            }
                        }),
                        renderer: $.fn.dataTable.Responsive.renderer.tableAll({
                            tableClass: 'table'
                        })
                    }
                }
            } );
        } );
    </script>*@